# ICOM4036 - Programming Languages - FALL 2020
## Assignment 1 - Construct a Lexical Anylizer for the Scheme Language

The goal of this assignment is to construct a lexical analyzer for the
Scheme programming language. The lexical specification for Scheme
is available as part of the official documentation at
http://www.scheme.com/tspl2d/grammar.html

**Disclaimer**: *Developed and tested using Ubuntu*

### Specifications
1. Implemented with JFLEX (http://jflex.de/)
2. Standalone scanner. No external depencecies in addition to the JFLEZ jar file.


## Usage
### Project Structure
- `lib/`
- `out/`
    - `class/`
    - `java/`
    - `tokenizer-output/`
- `src/`
    - `main/jflex/`
    - `test/data/`
- `Makefile`

The `lib/` directory containes the **JFLEX** jar file with which to build a scanner given a `.flex` or `.jflex` file with the syntax grammar rules specified.

The `out/` directory contains the `.java` scanner that is generated by **JFLEX** from the lexeme provided. 

The `src/` directory contains the syntax JFLEX sintax grammar rules and the **SCHEME** input files as well as the expected output files to compare for testing.

### Usage
This project comes with a dedicated ***[Makefile](https://www.gnu.org/software/make/manual/html_node/Introduction.html)***. This make file has thre main commands:
- compile
- run
- test


#### **make compile**
The first command passes the syntax grammar rules in JFLEX file in `jflex` or `.flex` format to the JFLEX jar file. This will create a `.java` under the `./out/java/` directory and build its `.class` file under `./out/class/`. 

The scanner is built using a JVM heap of 256MB by default. To increase this amount use the following command to override the default:

```
./p1-assignmaent-1$ make compile JVM_HEAP_SIZE=<AMOUNT>
```

Study the `./Makefile` to see what other default parameters can be overrided. 

#### **make run**
The second command will `run` a given input scheme file through the java scanner previously created with `make compile`. The output of tokens generated by the scanner will be saved in `./out/tokenizer-output/`. The resulting output file with be named using the same filename of the **Scheme** input file with `.tokenized` appended at the end.

The default file used as input is `./src/test/data/input-test1.scm`. This file can be changed.
For running another scheme file that is in the `./src/test/data/` directory you can override with **SCHEME_FILE**, if the scheme file is in other directory you can specify that directory with **SCHEME_FILE_PATH** and specifying its full path

\
Examples:
```
./p1-assignmaent-1$ make -e run SCHEME_FILE=anotherfileindata.scm
./p1-assignmaent-1$ make -e run SCHEME_FILE_PATH=/home/user/schemfile.scm
```

\
Example output:

```
./p1-assignmaent-1$ make run
```

Input filename: `scheme-inputfile.scm` \
Contents: 
```scheme
; arithmetic operations
(+ 2 #x4f)

; define/assign variables
(define var1 #b0)
```
Tokenized output: `scheme-inputfile.scm.tokenized` \
Contents:
```text
TOKEN [TYPE:OPEN_PAREN; TEXT:'('; LINE:1; COLUMN:0]
TOKEN [TYPE:SIGN; TEXT:'+'; LINE:1; COLUMN:1]
TOKEN [TYPE:UINTEGER10; TEXT:'2'; LINE:1; COLUMN:3]
TOKEN [TYPE:NUM16; TEXT:'#x4f'; LINE:1; COLUMN:5]
TOKEN [TYPE:CLOSE_PAREN; TEXT:')'; LINE:1; COLUMN:9]
TOKEN [TYPE:OPEN_PAREN; TEXT:'('; LINE:4; COLUMN:0]
TOKEN [TYPE:KEYWORD; TEXT:'define'; LINE:4; COLUMN:1]
TOKEN [TYPE:IDENTIFIER; TEXT:'var1'; LINE:4; COLUMN:8]
TOKEN [TYPE:NUM2; TEXT:'#b0'; LINE:4; COLUMN:13]
TOKEN [TYPE:CLOSE_PAREN; TEXT:')'; LINE:4; COLUMN:16]
```

#### **make test**

This command compares the output of the scanner to the predetermined correct output located in `./src/test/data/` with the starting name the same as its input filename with `.expected` appended to in.

The default behaviour is comparing the generated ouput in `./out/tokenizer-output/input-test1.scm.tokenized` with `./out/tokenizer-output/input-test1.scm.expected`. If no difference is detected the test is a success. This behaviour can be changed by
overriding the default params:
- **SCHEME_FILE**: if the file with `filename` exists in both `./out/tokenizer-output/filename.tokenized` and `./src/test/data/filename.expected` 
- **TEST_EXPECTED**: for expected test file located in `./src/test/data/`
- **TEST_OUT**: for file to test located in `./out/tokenizer-output/`

If the previous conditions are not met then you can specify full paths for both tokenized intput and expected tokenized.
- **OUT_TOKNZED_PATH**
- **TEST_EXPECTED_PATH**

Example output: 
```
./p1-assignmaent-1$ make test
mkdir -p out/tokenizer-output
java -cp out/class SchemeScanner ./src/test/data/input-test1.scm > out/tokenizer-output/input-test1.scm.tokenized
Test OK!
```

## Additional References
- Makefiles
    - https://en.wikipedia.org/wiki/Makefile#:~:text=A%20makefile%20is%20a%20file,to%20generate%20a%20target%2Fgoal.